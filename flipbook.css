
/* === Flipbook/TOC Add-on (scoped, safe) === */
.toc-compact{margin:.5rem 0 1rem;display:flex;justify-content:flex-start}
.toc-toggle{position:relative;display:inline-flex;align-items:center;gap:.5rem;padding:.55rem 1rem;border-radius:12px;border:1.5px solid var(--border);background:var(--surface);color:var(--text);font-weight:700;cursor:pointer;transition:border-color .15s ease,box-shadow .15s ease,background .15s ease}
.toc-toggle:hover{border-color:var(--muted);box-shadow:0 2px 10px rgba(0,0,0,.15)}
.toc-toggle::after{content:"";width:10px;height:10px;border-right:2px solid var(--text);border-bottom:2px solid var(--text);transform:rotate(45deg);margin-left:.25rem;transition:transform .15s ease}
.toc-compact.open .toc-toggle::after{transform:rotate(-135deg)}
.toc-panel{margin-top:.6rem;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:.6rem;max-height:50vh;overflow:auto;box-shadow:0 10px 24px rgba(0,0,0,.25)}
.toc-panel-list{list-style:none;padding:0;margin:0;display:grid;gap:.35rem;grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
.toc-panel-list a{display:block;padding:.45rem .6rem;border-radius:10px;border:1px solid var(--border);text-decoration:none;color:var(--link);background:transparent;transition:border-color .15s ease,transform .1s ease}
.toc-panel-list a:hover{border-color:var(--muted);transform:translateY(-1px)}
.toc-panel-list a.active{color:var(--accent);border-color:var(--muted)}
.toc-panel{scrollbar-color:var(--muted) var(--surface)}
.toc-panel::-webkit-scrollbar{width:10px}
.toc-panel::-webkit-scrollbar-track{background:var(--surface);border-radius:10px}
.toc-panel::-webkit-scrollbar-thumb{background:#222;border:2px solid var(--surface);border-radius:10px}
.toc-panel::-webkit-scrollbar-thumb:hover{background:#2b2b2b}

.book-frame{position:relative;border:3px solid var(--border);border-radius:14px;background:var(--card);box-shadow:0 8px 24px rgba(0,0,0,.25) inset;overflow:visible}
.book-pages{position:relative;overflow:hidden;min-height:55vh;padding:clamp(1.2rem,2.4vw,2rem)}
.book-page{display:none}
.book-page.active{display:block;animation:bookFade .18s ease}
.book-page h2{text-align:center;margin:.2rem 0 1rem;color:var(--muted)}
.book-arrow{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:999px;display:grid;place-items:center;font-size:1.8rem;line-height:1;border:1px solid var(--border);background:var(--surface);color:var(--text);cursor:pointer;z-index:5}
.book-arrow-left{left:-22px}.book-arrow-right{right:-22px}
@keyframes bookFade{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:none}}
@media(max-width:720px){.book-arrow{width:38px;height:38px;font-size:1.6rem}.book-arrow-left{left:-19px}.book-arrow-right{right:-19px}}
